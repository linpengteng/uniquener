!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).Uniquener=r()}(this,(function(){"use strict";const e=new Set([""]),r=(t={})=>{const n=t.onlyUpdate,i=t.usedUniques,o=!1!==t.reduplicateExit,a=t.throwErrorHandler||(e=>{}),s=t.reduplicateHandler||(e=>e),l=t.listenCacherHandler||(e=>{}),d=!0===o||"function"!=typeof t.reduplicateHandler;let c=t.radix||16,f=t.random||"?",u=t.format||null,h="number"==typeof t.tryCount?t.tryCount:10;if(!0===n)try{return i instanceof Array&&i.forEach((r=>"string"==typeof r&&r.trim()&&e.add(r))),i instanceof Set&&i.forEach((r=>"string"==typeof r&&r.trim()&&e.add(r))),l(new Set(e)),""}catch{throw a(new Set(e)),new Error("[Options.listenCacherHandler] is Call Error")}if([10,16,36].includes(c)||(c=16),["?","*","#"].includes(f)||(f="?"),String(u)!==u&&(u="????????-????-[1-5]???-[8-b]???-????????????",u=u.replace(/\?/g,f)),i instanceof Array)try{i.forEach((r=>"string"==typeof r&&r.trim()&&e.add(r))),l(new Set(e))}catch{throw a(new Set(e)),new Error("[Options.listenCacherHandler] is Call Error")}if(i instanceof Set)try{i.forEach((r=>"string"==typeof r&&r.trim()&&e.add(r))),l(new Set(e))}catch{throw a(new Set(e)),new Error("[Options.listenCacherHandler] is Call Error")}let p="",w=!0,y=!1;const E=Array.from({length:36},((e,r)=>r.toString(36))),m=e.add.bind(e);for(;w&&h-- >0;){if(p=[...u.replace(/\[([^\]]+?)\]/g,((e,r)=>{if("string"==typeof r){const e=new Set,t=e.add.bind(e),n=r.toLowerCase().split(/\s*,\s*|\s+/g).filter((e=>/^[a-zA-Z0-9\-*?#]+$/iu.test(e))),i=e=>/^[a-zA-Z0-9]-[a-zA-Z0-9]$/.test(e),o=n.reduce(((e,r)=>{if(i(r)){const e=r.split("-")[0],n=r.split("-")[1],i=E.indexOf(e),o=E.indexOf(n),a=Math.min(i,o),s=Math.max(i,o)+1;E.slice(a,s).forEach(t)}return i(r)||t(r),e}),e),a=Array.from(o).filter((e=>!!e));return a[Math.random()*a.length|0]||""}return e})).toLowerCase()].filter((e=>/^[a-zA-Z0-9\-*?#]+$/iu.test(e))).map((e=>e===f?E[Math.random()*c|0]:e)).join("").trim(),!e.has(p))try{w=!1,m(p),l(new Set(e))}catch{throw a(new Set(e)),new Error("[Options.listenCacherHandler] is Call Error")}}if(w&&d)throw a(new Set(e)),new Error("[Uniquener generate unique] is Reduplicated");if(w&&!d)try{const e=s(t),n={reduplicateExit:!0};return y=!0,r({...t,...e,...n})}catch{throw!y&&a(new Set(e)),new Error(y?"[Uniquener generate unique] is Reduplicated":"[Options.reduplicateHandler] is Call Error")}return p};return r}));
