"use strict";const r=new Set([""]),e=(t={})=>{const n=t.onlyUpdate,i=t.usedUniques,a=!1!==t.reduplicateExit,o=t.throwErrorHandler||(r=>{}),s=t.reduplicateHandler||(r=>r),l=t.listenCacherHandler||(r=>{}),c=!0===a||"function"!=typeof t.reduplicateHandler;let d=t.radix||16,f=t.random||"?",u=t.format||null,h="number"==typeof t.tryCount?t.tryCount:10;if(!0===n)try{return i instanceof Array&&i.forEach((e=>"string"==typeof e&&r.add(e.trim()))),i instanceof Set&&i.forEach((e=>"string"==typeof e&&r.add(e.trim()))),l(new Set(r)),""}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}if([10,16,36].includes(d)||(d=16),["?","*","#"].includes(f)||(f="?"),String(u)!==u&&(u="????????-????-[1-5]???-[8-b]???-????????????",u=u.replace(/\?/g,f)),i instanceof Array)try{i.forEach((e=>"string"==typeof e&&r.add(e.trim()))),l(new Set(r))}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}if(i instanceof Set)try{i.forEach((e=>"string"==typeof e&&r.add(e.trim()))),l(new Set(r))}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}let p="",w=!0,y=!1;const E=Array.from({length:36},((r,e)=>e.toString(36))),m=r.add.bind(r);for(;w&&h-- >0;){if(p=[...u.replace(/\[([^\]]+?)\]/g,((r,e)=>{if("string"==typeof e){const r=new Set,t=r.add.bind(r),n=e.toLowerCase().split(/\s*,\s*|\s+/g).filter((r=>/^[a-zA-Z0-9\-*?#]+$/iu.test(r))),i=r=>/^[a-zA-Z0-9]-[a-zA-Z0-9]$/.test(r),a=n.reduce(((r,e)=>{if(i(e)){const r=e.split("-")[0],n=e.split("-")[1],i=E.indexOf(r),a=E.indexOf(n),o=Math.min(i,a),s=Math.max(i,a)+1;E.slice(o,s).forEach(t)}return i(e)||t(e),r}),r),o=Array.from(a).filter((r=>!!r));return o[Math.random()*o.length|0]||""}return r})).toLowerCase()].filter((r=>/^[a-zA-Z0-9\-*?#]+$/iu.test(r))).map((r=>r===f?E[Math.random()*d|0]:r)).join("").trim(),!r.has(p))try{w=!1,m(p),l(new Set(r))}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}}if(w&&c)throw o(new Set(r)),new Error("[Uniquener generate unique] is Reduplicated");if(w&&!c)try{const r=s(t),n={reduplicateExit:!0};return y=!0,e({...t,...r,...n})}catch{throw!y&&o(new Set(r)),new Error(y?"[Uniquener generate unique] is Reduplicated":"[Options.reduplicateHandler] is Call Error")}return p};module.exports=e;
