"use strict";const r=new Set([""]),t=(e={})=>{const n=e.onlyUpdate,i=e.usedUniques,a=!1!==e.reduplicateExit,o=e.throwErrorHandler||(r=>{}),s=e.reduplicateHandler||(r=>r),l=e.listenCacherHandler||(r=>{}),c=!0===a||"function"!=typeof e.reduplicateHandler;let d=e.radix||16,f=e.random||"?",u=e.format||null,h="number"==typeof e.tryCount?e.tryCount:10;if(!0===n)try{return i instanceof Array&&i.forEach((t=>"string"==typeof t&&r.add(t.trim()))),i instanceof Set&&i.forEach((t=>"string"==typeof t&&r.add(t.trim()))),l(new Set(r)),""}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}if([10,16,26,36].includes(d)||(d=16),["?","*","#"].includes(f)||(f="?"),String(u)!==u&&(u="????????-????-[1-5]???-[8-b]???-????????????",u=u.replace(/\?/g,f)),i instanceof Array)try{i.forEach((t=>"string"==typeof t&&r.add(t.trim()))),l(new Set(r))}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}if(i instanceof Set)try{i.forEach((t=>"string"==typeof t&&r.add(t.trim()))),l(new Set(r))}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}let p="",w=!0,m=!1;const y=Array.from({length:36},((r,t)=>t.toString(36))),E=r.add.bind(r);for(;w&&h-- >0;){if(p=[...u.replace(/\[([^\]]+?)\]/g,((r,t)=>{if("string"==typeof t){const r=new Set,e=r.add.bind(r),n=t.toLowerCase().split(/\s*,\s*/g).filter((r=>/^[a-zA-Z0-9\s\-*?#]+$/iu.test(r))),i=r=>/^\s*[a-zA-Z0-9]\s*-\s*[a-zA-Z0-9]\s*$/.test(r),a=n.reduce(((r,t)=>{if(i(t.trim())){const r=t.trim().split(/\s*-\s*/)[0],n=t.trim().split(/\s*-\s*/)[1],i=y.indexOf(r.trim()),a=y.indexOf(n.trim()),o=Math.min(i,a),s=Math.max(i,a)+1;y.slice(o,s).forEach(e)}return i(t.trim())||e(t.trim()),r}),r),o=Array.from(a).filter((r=>!!r));return o[Math.random()*o.length|0]||""}return r})).toLowerCase()].filter((r=>/^[a-zA-Z0-9\-*?#]+$/iu.test(r))).map((r=>r===f?y[Math.random()*d|0+(26===d?10:0)]:r)).join("").trim(),!r.has(p))try{w=!1,E(p),l(new Set(r))}catch{throw o(new Set(r)),new Error("[Options.listenCacherHandler] is Call Error")}}if(w&&c)throw o(new Set(r)),new Error("[Uniquener generate unique] is Reduplicated");if(w&&!c)try{const r=s(e),n={reduplicateExit:!0};return m=!0,t({...e,...r,...n})}catch{throw!m&&o(new Set(r)),new Error(m?"[Uniquener generate unique] is Reduplicated":"[Options.reduplicateHandler] is Call Error")}return p};module.exports=t;
